<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Notifications</title>

<link rel="stylesheet" href="http://www.whisperservers.com/ragios/wp-content/themes/hybrid/style.css" type="text/css" media="all" />
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.whisperservers.com/ragios/xmlrpc.php" />

<meta name="generator" content="WordPress 3.2.1 - really-static 0.5" />
<meta name="template" content="Hybrid 0.9" />
<meta name="robots" content="index,follow" />
<meta name="author" content="admin" />
<meta name="copyright" content="Copyright (c) August 2011" />
<meta name="revised" content="Thursday, March 28th, 2013, 6:56 am" />
<link rel="alternate" type="application/rss+xml" title="Ragios (St. Ruby) &raquo; Feed" href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/feed/" />

<script type='text/javascript' src='http://www.whisperservers.com/ragios/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://www.whisperservers.com/ragios/wp-includes/js/jquery/jquery.js?ver=1.6.1'></script>
<link rel='index' title='Ragios (St. Ruby)' href='http://www.whisperservers.com/ragios/' />
<link rel='up' title='Ragios (Saint Ruby)' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/' />
<link rel='prev' title='Using Ragios' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/using-ragios/' />
<link rel='next' title='Status Reports' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/status-reports/' />
<link rel='canonical' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/notifications/' />

<link rel="stylesheet" href="http://www.whisperservers.com/ragios/wp-content/plugins/wp-syntax/wp-syntax.css" type="text/css" media="screen" />

</head>

<body class="wordpress ltr en_US y2013 m08 d12 h00 monday logged-out singular singular-page singular-page-8 page-template-default page-8 primary-active secondary-inactive subsidiary-inactive">


<div id="body-container">

	
	<div id="header-container">

		<div id="header">

			<div id="site-title"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/" title="Ragios (St. Ruby)" rel="home"><span>Ragios (St. Ruby)</span></a></div>
			<div id="site-description"><span>System &amp; Network Monitoring Tool</span></div>

		</div><!-- #header -->

	</div><!-- #header-container -->

	
	<div id="container">

		
	<div id="content" class="hfeed content">

		<div class="breadcrumb breadcrumbs"><div class="breadcrumb-trail"><span class="trail-before"><span class="breadcrumb-title">Browse:</span></span> <a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/" title="Ragios (St. Ruby)" rel="home" class="trail-begin">Home</a> <span class="sep">/</span> <a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/" title="Ragios (Saint Ruby)">Ragios (Saint Ruby)</a> <span class="sep">/</span> <span class="trail-end">Notifications</span></div></div>
		
			<div id="post-8" class="hentry page publish post-1 odd author-admin">

				<h1 class="page-title entry-title"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/notifications/" title="Notifications" rel="bookmark">Notifications</a></h1>
				<div class="entry-content">
					<p>When a test fails the system sends out a notification to the system admin about the problem.</p>
<p>Sending Notifications via Sendmail</p>
<p>To send out notifications via sendmail use via:‘email’, example</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">monitoring =  <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#123;</span> monitor:<span style="color:#996600;">'url'</span>,
                  every:<span style="color:#996600;">'5m'</span>,
                  test:<span style="color:#996600;">'video datafeed test'</span>,
                  url:<span style="color:#996600;">'http://www.datafeed.com/resources/videos/1'</span>,
                  contact:<span style="color:#996600;">'admin@mail.com'</span>,
                  via:<span style="color:#996600;">'email'</span>,  
                  notify_interval:<span style="color:#996600;">'6h'</span>
              <span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#93;</span></pre></div></div>

<p>You just need to have sendmail installed in your system, Ragios will use it to send the notification.</p>
<p><strong>Sending Notifications via Gmail</strong></p>
<p>To send out notifications via gmail, first create a Gmail account for the Ragios system. The email notifications will be sent out from this Gmail account.</p>
<p>Edit the script Ragios/config.rb, add the username &#038; password of the Gmail account you created. See below;</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">gmail_account = <span style="color:#006600; font-weight:bold;">&#123;</span>username:<span style="color:#996600;">'Gmail Username'</span>, <span style="color:#008000; font-style:italic;">#replace with gmail username</span>
                 password:<span style="color:#996600;">'Gmail Password'</span><span style="color:#006600; font-weight:bold;">&#125;</span>  <span style="color:#008000; font-style:italic;">#replace with gmail password</span></pre></div></div>

<p>Example</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">gmail_account = <span style="color:#006600; font-weight:bold;">&#123;</span>username:<span style="color:#996600;">'Ragios'</span>, 
                 password:<span style="color:#996600;">'xyz123'</span><span style="color:#006600; font-weight:bold;">&#125;</span></pre></div></div>

<p>Now on the main.rb script use via:‘gmail’, see example below</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">monitoring	= <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#123;</span> monitor:<span style="color:#996600;">'url'</span>,
                  every:<span style="color:#996600;">'5m'</span>,
                  test:<span style="color:#996600;">'video datafeed test'</span>,
                  url:<span style="color:#996600;">'http://www.datafeed.com/resources/videos/1'</span>,
                  contact:<span style="color:#996600;">'admin@mail.com'</span>,
                  via:<span style="color:#996600;">'gmail'</span>,  
                  notify_interval:<span style="color:#996600;">'6h'</span>
                <span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#93;</span></pre></div></div>

<p><strong>Sending Notifications via Amazon Simple Email Service</strong></p>
<p>First you need an Amazon Web Services account. Sign up for the Amazon Simple Email Service. Add &#038; verify the domain you want Ragios to send the notification emails from.</p>
<p>Open the Ragios/config.rb script and add your Amazon access key and secret key to the section below:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"><span style="color:#008000; font-style:italic;">#Replace with amazon credientials for Amazon Simple Email Service Notifier</span>
amazon_account = <span style="color:#006600; font-weight:bold;">&#123;</span> access_key: <span style="color:#996600;">'abc'</span>,
                   secret_key: <span style="color:#996600;">'123'</span>, 
                   send_from: <span style="color:#996600;">'alerts &lt;alerts@example.com&gt;'</span> <span style="color:#006600; font-weight:bold;">&#125;</span></pre></div></div>

<p>Replace &#8216;alerts <alerts@example.com>&#8216; with the email address you want the notification emails to come from. This email address must be from a verified domain in your Amazon SES account. </p>
<p>Now on the main.rb script use via:‘ses’, see example below</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">monitoring	= <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#123;</span> monitor:<span style="color:#996600;">'url'</span>,
                  every:<span style="color:#996600;">'5m'</span>,
                  test:<span style="color:#996600;">'video datafeed test'</span>,
                  url:<span style="color:#996600;">'http://www.datafeed.com/resources/videos/1'</span>,
                  contact:<span style="color:#996600;">'admin@mail.com'</span>,
                  via:<span style="color:#996600;">'ses'</span>,  
                  notify_interval:<span style="color:#996600;">'6h'</span>
                <span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#93;</span></pre></div></div>

<p><strong>Sending Notifications via Twitter</strong></p>
<p>First you need to create and register a twitter app at twitter.com/apps/new. Ragios will use this app to tweet the notifications. After you register the App, Twitter will give you a consumer_key and a consumer_secret. We will use them later.</p>
<p>Next you need to create a new twitter account for the Ragios system. This is the Twitter account that will tweet the notifications. To receive the tweets the system admin should follow this account on twitter. The account should be set to private on twitter.</p>
<p>After you create the account, you need to grant your registered twitter app access to it.</p>
<p>To do this you need the oauth rubygem</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">sudo gem install oauth</pre></div></div>

<p>This ruby script below will do the trick, copy and run the script in your system:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;"><span style="color:#008000; font-style:italic;">#twitter_auth.rb</span>
<span style="color:#008000; font-style:italic;">#!/usr/bin/ruby</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">'rubygems'</span>
<span style="color:#CC0066; font-weight:bold;">require</span> <span style="color:#996600;">'oauth'</span>
&nbsp;
consumer = <span style="color:#6666ff; font-weight:bold;">OAuth::Consumer</span>.<span style="color:#9900CC;">new</span><span style="color:#006600; font-weight:bold;">&#40;</span>
  <span style="color:#996600;">'consumer key'</span>,
  <span style="color:#996600;">'consumer secret'</span>,
  <span style="color:#006600; font-weight:bold;">&#123;</span>:site <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'http://twitter.com'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
<span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
request_token = consumer.<span style="color:#9900CC;">get_request_token</span>
&nbsp;
<span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">&quot;Twitter App Authorize URL <span style="color:#000099;">\n</span>&quot;</span> <span style="color:#006600; font-weight:bold;">+</span> request_token.<span style="color:#9900CC;">authorize_url</span>
<span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">&quot;Enter PIN:&quot;</span>
pin = STDIN.<span style="color:#CC0066; font-weight:bold;">readline</span>.<span style="color:#CC0066; font-weight:bold;">chomp</span>
&nbsp;
access_token = request_token.<span style="color:#9900CC;">get_access_token</span><span style="color:#006600; font-weight:bold;">&#40;</span><span style="color:#ff3333; font-weight:bold;">:oauth_verifier</span> <span style="color:#006600; font-weight:bold;">=&gt;</span> pin<span style="color:#006600; font-weight:bold;">&#41;</span>
&nbsp;
<span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">&quot;access token: &quot;</span> <span style="color:#006600; font-weight:bold;">+</span> access_token.<span style="color:#9900CC;">token</span>
<span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">&quot;access secret: &quot;</span> <span style="color:#006600; font-weight:bold;">+</span> access_token.<span style="color:#9900CC;">secret</span></pre></div></div>

<p>Use the ‘consumer_key’ and ‘consumer secret’ Twitter generated for your app earlier. Add it to these lines in the script:</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">consumer = <span style="color:#6666ff; font-weight:bold;">OAuth::Consumer</span>.<span style="color:#9900CC;">new</span><span style="color:#006600; font-weight:bold;">&#40;</span>
&nbsp;
	    <span style="color:#996600;">'consumer key'</span>,
	    <span style="color:#996600;">'consumer secret'</span>,
    <span style="color:#006600; font-weight:bold;">&#123;</span>:site <span style="color:#006600; font-weight:bold;">=&gt;</span> <span style="color:#996600;">'http://twitter.com'</span><span style="color:#006600; font-weight:bold;">&#125;</span>
   <span style="color:#006600; font-weight:bold;">&#41;</span></pre></div></div>

<p>When you run the script it will display an authorization URL, this is the url that you will use to ALLOW or DENY your twitter app access to the Twitter account you created for Ragios. Open the authorization URL in a web browser, choose ALLOW to grant access to your twitter app. Twitter will give you a PIN number, enter that PIN number on the prompt displayed by the ruby script. After this, the script will display your access_token and access_secret. The access_token and access_secret is all Ragios needs to gain read and write access to the twitter account.</p>
<p>Now open the config.rb script located in Ragios/ directory. Add the real values for the access_token, access_secret, consumer key and consumer secret. Replace the string in quotes.</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">twitter_cred = <span style="color:#006600; font-weight:bold;">&#123;</span>consumer_key: <span style="color:#996600;">'Consumer Key'</span>, 
               consumer_secret: <span style="color:#996600;">'Consumer secret'</span>,
               access_token: <span style="color:#996600;">'Access Token'</span>,
               access_secret: <span style="color:#996600;">'Access Secret'</span><span style="color:#006600; font-weight:bold;">&#125;</span></pre></div></div>

<p>Now on the main.rb script use via:‘twitter’ example</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">monitoring = <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#123;</span>monitor:<span style="color:#996600;">'url'</span>,
                every:<span style="color:#996600;">'5m'</span>,
                test:<span style="color:#996600;">'video datafeed test'</span>,
                url:<span style="color:#996600;">'http://www.datafeed.com/resources/videos/1'</span>,
                contact:<span style="color:#996600;">'admin@mail.com'</span>,
                via:<span style="color:#996600;">'twitter'</span>,  
                notify_interval:<span style="color:#996600;">'6h'</span>
               <span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#93;</span></pre></div></div>

<p>Example of an email notification may look like this:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">Subject: Http connection to my blog FAILED
&nbsp;
Http connection to my blog FAILED! 
HTTP Connection to obi-akubue.org = getaddrinfo: Name or service not known
Created on: September 22, 2010 13:55</pre></div></div>

<p>A tweet notification may look like this:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">Http connection to my blog FAILED! 
HTTP Request to http://obi-akubue.org/ = getaddrinfo: Name or service not known 
Created on: October 16, 04:48</pre></div></div>

<p>The notifications messages are generated from ERB templates stored in the Ragios/lib/ragios/messages folder. You can edit the templates to change the format or layout of the notification messages.</p>
<p><strong>Editing the Notification Messages</strong></p>
<p>All notifcation messages are generated from ERB template files in the Ragios/lib/ragios/messages folder. You can edit any of the ERB template files to change the format of messages sent by the system. The ERB templates have access to all attributes of the monitor, so you can easily edit the template to add or remove attributes you would like to see on messages.</p>
<p>Below is a list of ERB templates used by the system:</p>

<div class="wp_syntax"><div class="code"><pre class="plain" style="font-family:monospace;">lib/ragios/messages/email_notify.erb    -- email notification messages 
&nbsp;
lib/ragios/messages/tweet_notify.erb    -- notifications sent by a tweet
&nbsp;
lib/ragios/messages/email_resolved.erb  -- issue resolved email messages 
                                                          sent to the admin
&nbsp;
lib/ragios/messages/tweet_resolved.erb  -- issue resolved messages sent via twitter</pre></div></div>

									</div><!-- .entry-content -->

				
			</div><!-- .hentry -->

			
			
			
		
		
	
	</div><!-- .content .hfeed -->

		
	<div id="primary" class="sidebar aside">

		
		<div id="hybrid-nav-menu-3" class="widget nav-menu widget-nav-menu"><div class="widget-wrap widget-inside"><h3 class="widget-title">Ragios</h3><div class="menu-ragios-container"><ul id="menu-ragios" class="nav-menu"><li id="menu-item-28" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor menu-item-28"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/">Ragios (Saint Ruby)</a><ul class="sub-menu"><li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/installation/">Installation</a></li><li id="menu-item-30" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-30"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/using-ragios/">Using Ragios</a></li><li id="menu-item-29" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-8 current_page_item menu-item-29"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/notifications/">Notifications</a></li><li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-33"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/status-reports/">Status Reports</a></li><li id="menu-item-31" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-31"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/adding-failure-recovery-code-to-monitors/">Failure Recovery</a></li></ul></li><li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-32"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-plugin-system/">Ragios Plugin System</a></li><li id="menu-item-102" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-102"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-server/">Ragios Server</a><ul class="sub-menu"><li id="menu-item-124" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-124"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/server-setup/">Server Setup</a></li><li id="menu-item-111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/usage/">Using Ragios Server</a></li><li id="menu-item-141" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-141"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-rest-api/">REST API</a><ul class="sub-menu"><li id="menu-item-239" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-239"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/api-authentication/">API Authentication</a></li><li id="menu-item-183" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-183"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/monitors-api/">Monitors</a></li><li id="menu-item-182" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-182"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/status-updates-api/">Status Updates</a></li></ul></li></ul></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-90"><a href="https://github.com/obi-a/Ragios">Source Code</a></li></ul></div></div></div>
		
	</div><!-- #primary .aside -->


	</div><!-- #container -->

	<div id="footer-container">

		
		<div id="footer">

			<div class="footer-insert"><p class="copyright">Copyright &#169; 2013 <a href="http://obi-akubue.org">obi-akubue.org</a>.</p>

</div>
		</div><!-- #footer -->

		
	</div><!-- #footer-container -->

</div><!-- #body-container -->

<script type='text/javascript' src='http://www.whisperservers.com/ragios/wp-content/themes/hybrid/library/js/drop-downs.js?ver=1.4'></script>

    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20190925-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();
</script>

<a style='color:transparent;position:absolute;left:-99999px;z-index:-99999' href='http://www.wpdownloadmanager.com/' title='Premium Wordpress Plugin download manager'>Premium Wordpress Plugin</a>
    
</body>
</html>
<!-- Dynamic page generated in 0.429 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2013-08-12 00:18:10 -->

<!-- super cache -->