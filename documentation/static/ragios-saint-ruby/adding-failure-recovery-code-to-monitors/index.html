<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Failure Recovery</title>

<link rel="stylesheet" href="http://www.whisperservers.com/ragios/wp-content/themes/hybrid/style.css" type="text/css" media="all" />
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="http://www.whisperservers.com/ragios/xmlrpc.php" />

<meta name="generator" content="WordPress 3.2.1 - really-static 0.5" />
<meta name="template" content="Hybrid 0.9" />
<meta name="robots" content="index,follow" />
<meta name="author" content="admin" />
<meta name="copyright" content="Copyright (c) August 2011" />
<meta name="revised" content="Friday, August 12th, 2011, 3:18 pm" />
<link rel="alternate" type="application/rss+xml" title="Ragios (St. Ruby) &raquo; Feed" href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/feed/" />

<script type='text/javascript' src='http://www.whisperservers.com/ragios/wp-includes/js/l10n.js?ver=20101110'></script>
<script type='text/javascript' src='http://www.whisperservers.com/ragios/wp-includes/js/jquery/jquery.js?ver=1.6.1'></script>
<link rel='index' title='Ragios (St. Ruby)' href='http://www.whisperservers.com/ragios/' />
<link rel='up' title='Ragios (Saint Ruby)' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/' />
<link rel='prev' title='Status Reports' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/status-reports/' />
<link rel='next' title='Ragios Plugin System' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-plugin-system/' />
<link rel='canonical' href='http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/adding-failure-recovery-code-to-monitors/' />

<link rel="stylesheet" href="http://www.whisperservers.com/ragios/wp-content/plugins/wp-syntax/wp-syntax.css" type="text/css" media="screen" />

</head>

<body class="wordpress ltr en_US y2013 m06 d09 h19 sunday logged-out singular singular-page singular-page-12 page-template-default page-12 primary-active secondary-inactive subsidiary-inactive">


<div id="body-container">

	
	<div id="header-container">

		<div id="header">

			<div id="site-title"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/" title="Ragios (St. Ruby)" rel="home"><span>Ragios (St. Ruby)</span></a></div>
			<div id="site-description"><span>System &amp; Network Monitoring Tool</span></div>

		</div><!-- #header -->

	</div><!-- #header-container -->

	
	<div id="container">

		
	<div id="content" class="hfeed content">

		<div class="breadcrumb breadcrumbs"><div class="breadcrumb-trail"><span class="trail-before"><span class="breadcrumb-title">Browse:</span></span> <a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/" title="Ragios (St. Ruby)" rel="home" class="trail-begin">Home</a> <span class="sep">/</span> <a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/" title="Ragios (Saint Ruby)">Ragios (Saint Ruby)</a> <span class="sep">/</span> <span class="trail-end">Failure Recovery</span></div></div>
		
			<div id="post-12" class="hentry page publish post-1 odd author-admin">

				<h1 class="page-title entry-title"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/adding-failure-recovery-code-to-monitors/" title="Failure Recovery" rel="bookmark">Failure Recovery</a></h1>
				<div class="entry-content">
					<p>You can add failure recovery code to your monitors, when a monitored system fails the failure recovery code will be excuted by Ragios.</p>
<p>You can add 2 types of failure recovery code:</p>
<ul>
<li>Code to be excuted when a monitored system fails, and</li>
<li>Code to be excuted when a monitored system recovers from failure.</li>
</ul>
<p>When a server is being monitored for availability, failure recovery code could be used to switch to a backup server when the main server goes down, and then switch back to the main server when it recovers. This also applies to any type of system being monitored databases, websites, datafeeds, API etc.</p>
<p>Lets say you want your web app to switch to a backup datafeed when your main datafeed goes offline.</p>

<div class="wp_syntax"><div class="code"><pre class="ruby" style="font-family:monospace;">run_when_failed = <span style="color:#CC0066; font-weight:bold;">lambda</span><span style="color:#006600; font-weight:bold;">&#123;</span>
                          <span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">'switch to backup datafeed'</span>
                          <span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">'do something'</span>
                        <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
run_when_fixed = <span style="color:#CC0066; font-weight:bold;">lambda</span><span style="color:#006600; font-weight:bold;">&#123;</span>
                          <span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">'switch to main datafeed'</span>
                          <span style="color:#CC0066; font-weight:bold;">puts</span> <span style="color:#996600;">'do something'</span>
                       <span style="color:#006600; font-weight:bold;">&#125;</span>
&nbsp;
monitoring = <span style="color:#006600; font-weight:bold;">&#91;</span><span style="color:#006600; font-weight:bold;">&#123;</span> monitor: <span style="color:#996600;">'url'</span>,
                every: <span style="color:#996600;">'2m'</span>,
                test: <span style="color:#996600;">'XYZ data feed'</span>,
                url: <span style="color:#996600;">'http://www.website.com/89843/videos.xml'</span>,
                contact: <span style="color:#996600;">'admin@mail.com'</span>,
                via: <span style="color:#996600;">'gmail'</span>,
                notify_interval: <span style="color:#996600;">'6h'</span>,
&nbsp;
                failed: run_when_failed,
                fixed: run_when_fixed
&nbsp;
             <span style="color:#006600; font-weight:bold;">&#125;</span><span style="color:#006600; font-weight:bold;">&#93;</span>
&nbsp;
<span style="color:#6666ff; font-weight:bold;">Ragios::Monitor</span>.<span style="color:#9900CC;">start</span> monitoring</pre></div></div>

<p>failed: points to a code block that will be excuted when the monitored system goes down while fixed: points to a code block that will be excuted when the monitored system recovers from failure. </p>
<p>In the example above, When the monitored url fails, the code block run_when_failed will be excuted and when it recovers from failure, the code block run_when_fixed will be executed.</p>
<p>Both code blocks are only excuted once. The failed:code_block is only excuted when the monitored system goes into a FAILED state, while fixed:code_block is only excuted when the monitored system recovers from a FAILED state.</p>
									</div><!-- .entry-content -->

				
			</div><!-- .hentry -->

			
			
			
		
		
	
	</div><!-- .content .hfeed -->

		
	<div id="primary" class="sidebar aside">

		
		<div id="hybrid-nav-menu-3" class="widget nav-menu widget-nav-menu"><div class="widget-wrap widget-inside"><h3 class="widget-title">Ragios</h3><div class="menu-ragios-container"><ul id="menu-ragios" class="nav-menu"><li id="menu-item-28" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor menu-item-28"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/">Ragios (Saint Ruby)</a><ul class="sub-menu"><li id="menu-item-34" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-34"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/installation/">Installation</a></li><li id="menu-item-30" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-30"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/using-ragios/">Using Ragios</a></li><li id="menu-item-29" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-29"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/notifications/">Notifications</a></li><li id="menu-item-33" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-33"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/status-reports/">Status Reports</a></li><li id="menu-item-31" class="menu-item menu-item-type-post_type menu-item-object-page current-menu-item page_item page-item-12 current_page_item menu-item-31"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-saint-ruby/adding-failure-recovery-code-to-monitors/">Failure Recovery</a></li></ul></li><li id="menu-item-32" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-32"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-plugin-system/">Ragios Plugin System</a></li><li id="menu-item-102" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-102"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-server/">Ragios Server</a><ul class="sub-menu"><li id="menu-item-124" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-124"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/server-setup/">Server Setup</a></li><li id="menu-item-111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/usage/">Using Ragios Server</a></li><li id="menu-item-141" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-141"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/ragios-rest-api/">REST API</a><ul class="sub-menu"><li id="menu-item-183" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-183"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/monitors-api/">Monitors</a></li><li id="menu-item-182" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-182"><a href="http://www.whisperservers.com/ragios/wp-content/plugins/really-static/static/status-updates-api/">Status Updates</a></li></ul></li></ul></li><li id="menu-item-90" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-90"><a href="https://github.com/obi-a/Ragios">Source Code</a></li></ul></div></div></div>
		
	</div><!-- #primary .aside -->


	</div><!-- #container -->

	<div id="footer-container">

		
		<div id="footer">

			<div class="footer-insert"><p class="copyright">Copyright &#169; 2013 <a href="http://obi-akubue.org">obi-akubue.org</a>.</p>

</div>
		</div><!-- #footer -->

		
	</div><!-- #footer-container -->

</div><!-- #body-container -->

<script type='text/javascript' src='http://www.whisperservers.com/ragios/wp-content/themes/hybrid/library/js/drop-downs.js?ver=1.4'></script>

    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-20190925-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();
</script>

<a style='color:transparent;position:absolute;left:-99999px;z-index:-99999' href='http://www.wpdownloadmanager.com/' title='Premium Wordpress Plugin download manager'>Premium Wordpress Plugin</a>
    
</body>
</html>
<!-- Dynamic page generated in 0.453 seconds. -->
<!-- Cached page generated by WP-Super-Cache on 2013-06-09 19:58:00 -->

<!-- super cache -->